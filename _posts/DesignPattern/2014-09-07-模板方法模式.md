---
layout: page
title: 设计模式-模板方法
category: DesignPattern
tags: 模板方法模式
image:
  feature: abstract-2.jpg
  credit: dargadgetz
  creditlink: http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/
comments: true
modified: 2014-09-07
---
模式定义
-----------
>**模板方法模式**在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以再不改变算法结构的情况下，重新定义算法中的某些步骤。

设计类图
-----------
<a href="http://imgbox.com/iEmak8eY" target="_blank"><img src="http://6.t.imgbox.com/iEmak8eY.jpg" alt="image host"/></a>

抽象类中可以有空的方法或者有默认的实现，子类可以视情况决定要不要覆盖它，这种方法被称为钩子。钩子的存在可以让子类有能力对算法的不同点进行挂钩。

Q1：在模板方法模式中什么时候用抽象方法，什么时候用钩子？
: 当子类必须提供算法中某个方法或步骤的实现时使用抽象方法。如果算法的这个部分是可选的，就用钩子。

Q2：Java API中使用模板方法模式的地方？
: InputStream类中有一个read()方法是由子类实现的。read(byte b[], int off, int len)是模板方法，它调用了read()方法。Swing的JFrame中的update方法控制刷新屏幕的算法，我们可以通过覆盖paint钩子方法与update方法挂钩。Applet大量使用钩子来提供行为。在代码世界中存在大量模板方法模式的变体。

设计原则
-----------
>**好莱坞原则**允许低层组件挂钩将自己挂钩到系统上，但是高层组件会决定什么时候和怎样使用这些低层组件，避免让高层组件和低层组件之间有明显的环状依赖。

Q3：好莱坞原则和依赖导致原则之间的关系如何？
: 依赖倒置原则让我们尽量避免使用具体类，而多使用抽象；而好莱坞原则使用在创建框架或组件上的一种技巧，好让低层组件能够被挂钩进计算中，而且又不会让高层组件依赖低层组件。两者的目标都是解耦，但是依赖倒置原则更加注意如何在设计中避免依赖。好莱坞原则重在创建一个有弹性的设计，允许低层结构能够互相操作，而又防止其他类太过依赖他们。
